<template>
  <div class="tuition-container">
    <div class="summer-program">
      <h2 class="program-title animate-on-scroll" data-animation="fade-up">
        CH∆Ø∆†NG TR√åNH H·ªåC PH√ç
      </h2>
      <div class="program-list">
        <div
          class="program-box animate-on-scroll"
          data-animation="fade-up"
          data-delay="200"
        >
          <h3 class="program-name">V∆Ø·ªúN ∆ØM B√â V√ÄO L·ªöP M·∫¶M</h3>
          <img
            src="../../../assets/images/Home/1_638505759099380765.jpg"
            alt="V∆∞·ªùn ∆∞∆°m"
            class="program-image"
          />
          <div class="program-content">
            <p>
              <strong>ƒê·ªëi t∆∞·ª£ng:</strong><br />
              H·ªçc sinh sinh nƒÉm 2025 chu·∫©n b·ªã v√†o l·ªõp m·∫ßm t·∫°i tr∆∞·ªùng m·∫ßm non
              Sky-Line v√† c√°c tr∆∞·ªùng m·∫ßm non kh√°c trong khu v·ª±c.
            </p>
            <p>
              <strong>Th·ªùi gian:</strong><br />
              9/6/2025 ‚Äì 18/7/2025 (6 tu·∫ßn)
            </p>
            <p>
              <strong>ƒê·ªãa ƒëi·ªÉm h·ªçc t·∫≠p v√† sinh ho·∫°t:</strong><br />
              C√°c c∆° s·ªü (2, 3, 4, 5) thu·ªôc H·ªá th·ªëng Gi√°o d·ª•c Sky-Line
            </p>
            <p>
              <strong>H·ªçc ph√≠:</strong><br />
              8.500.000 VNƒê/tr·ªçn kh√≥a 6 tu·∫ßn (ƒë√£ bao g·ªìm chi ph√≠ h·ªçc t·∫≠p, t√†i
              li·ªáu, ho·∫°t ƒë·ªông v√† ƒÉn u·ªëng trong ng√†y)
            </p>
            <button class="detail-button" @click="showProgramDetail('mam')">
              Chi ti·∫øt ch∆∞∆°ng tr√¨nh h·ªçc
            </button>
          </div>
        </div>

        <!-- Box 2 -->
        <div
          class="program-box animate-on-scroll"
          data-animation="fade-up"
          data-delay="400"
        >
          <h3 class="program-name">V∆Ø·ªúN ∆ØM B√â V√ÄO L·ªöP CH·ªíI</h3>
          <img
            src="../../../assets/images/Home/1_638505759099380765.jpg"
            alt="M√πa h√® s√°ng t·∫°o"
            class="program-image"
          />
          <div class="program-content">
            <p>
              <strong>ƒê·ªëi t∆∞·ª£ng:</strong><br />H·ªçc sinh sinh nƒÉm 2025 chu·∫©n b·ªã
              v√†o l·ªõp ch√≤i t·∫°i tr∆∞·ªùng m·∫ßm non Sky-Line v√† c√°c tr∆∞·ªùng m·∫ßm non
              kh√°c trong khu v·ª±c.
            </p>
            <p>
              <strong>Th·ªùi gian:</strong><br />9/6/2025 ‚Äì 18/7/2025 (6 tu·∫ßn)
            </p>
            <p>
              <strong>ƒê·ªãa ƒëi·ªÉm h·ªçc t·∫≠p v√† sinh ho·∫°t:</strong><br />C√°c c∆° s·ªü (2,
              3, 4, 5) thu·ªôc H·ªá th·ªëng Gi√°o d·ª•c Sky-Line
            </p>
            <p>
              <strong>H·ªçc ph√≠:</strong><br />7.900.000 VNƒê/tr·ªçn kh√≥a 6 tu·∫ßn (bao
              g·ªìm chi ph√≠ h·ªçc t·∫≠p, tr·∫£i nghi·ªám s√°ng t·∫°o v√† ƒÉn u·ªëng)
            </p>
            <button class="detail-button" @click="showProgramDetail('choi')">
              Chi ti·∫øt ch∆∞∆°ng tr√¨nh h·ªçc
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal chi ti·∫øt ch∆∞∆°ng tr√¨nh -->
    <div v-if="showModal" class="modal-overlay" @click="closeModal">
      <div class="modal-content" @click.stop>
        <div class="modal-header">
          <h3>{{ currentProgram.title }}</h3>
          <button class="close-button" @click="closeModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="detail-section">
            <h4>üìö N·ªôi dung ch∆∞∆°ng tr√¨nh</h4>
            <ul>
              <li v-for="content in currentProgram.contents" :key="content">
                {{ content }}
              </li>
            </ul>
          </div>

          <div class="detail-section">
            <h4>üéØ M·ª•c ti√™u</h4>
            <ul>
              <li v-for="goal in currentProgram.goals" :key="goal">
                {{ goal }}
              </li>
            </ul>
          </div>

          <div class="detail-section">
            <h4>üìã Th√¥ng tin th√™m</h4>
            <div class="info-grid">
              <div class="info-item">
                <strong>S·ªë l∆∞·ª£ng h·ªçc sinh:</strong>
                <span>{{ currentProgram.studentCount }}</span>
              </div>
              <div class="info-item">
                <strong>Gi√°o vi√™n:</strong>
                <span>{{ currentProgram.teachers }}</span>
              </div>
              <div class="info-item">
                <strong>Ho·∫°t ƒë·ªông ngo·∫°i kh√≥a:</strong>
                <span>{{ currentProgram.activities }}</span>
              </div>
              <div class="info-item">
                <strong>ƒêƒÉng k√Ω:</strong>
                <span>{{ currentProgram.registration }}</span>
              </div>
            </div>
          </div>

          <div class="detail-section">
            <h4>üí∞ Chi ph√≠ chi ti·∫øt</h4>
            <div class="cost-breakdown">
              <div
                v-for="cost in currentProgram.costs"
                :key="cost.item"
                class="cost-item"
              >
                <span>{{ cost.item }}</span>
                <span>{{ cost.amount }}</span>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="register-button" @click="goToRegistration">ƒêƒÉng k√Ω ngay</button>
          <button class="contact-button">Li√™n h·ªá t∆∞ v·∫•n</button>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import { useRouter } from "vue-router";

export default {
  name: "TuitionComponent",
  setup() {
    const router = useRouter();

    const goToRegistration = () => {
      router.push("/registration");
    };

    return {
      goToRegistration,
    };
  },
  data() {
    return {
      showModal: false,
      currentProgram: {},
      programDetails: {
        mam: {
          title: "V∆Ø·ªúN ∆ØM B√â V√ÄO L·ªöP M·∫¶M",
          contents: [
            "L√†m quen v·ªõi m√¥i tr∆∞·ªùng h·ªçc t·∫≠p m·ªõi",
            "Ph√°t tri·ªÉn k·ªπ nƒÉng giao ti·∫øp v√† x√£ h·ªôi",
            "R√®n luy·ªán th√≥i quen sinh ho·∫°t t·ª± l·∫≠p",
            "Kh√°m ph√° th·∫ø gi·ªõi xung quanh qua tr√≤ ch∆°i",
            "Ph√°t tri·ªÉn v·∫≠n ƒë·ªông tinh v√† th√¥",
            "H·ªçc t·∫≠p qua c√°c ho·∫°t ƒë·ªông vui ch∆°i",
          ],
          goals: [
            "Gi√∫p tr·∫ª th√≠ch nghi v·ªõi m√¥i tr∆∞·ªùng h·ªçc ƒë∆∞·ªùng",
            "Ph√°t tri·ªÉn to√†n di·ªán v·ªÅ th·ªÉ ch·∫•t v√† tinh th·∫ßn",
            "X√¢y d·ª±ng n·ªÅn t·∫£ng cho vi·ªác h·ªçc t·∫≠p sau n√†y",
            "TƒÉng c∆∞·ªùng s·ª± t·ª± tin v√† ƒë·ªôc l·∫≠p c·ªßa tr·∫ª",
          ],
          studentCount: "15-20 tr·∫ª/l·ªõp",
          teachers: "2 gi√°o vi√™n ch√≠nh + 1 tr·ª£ gi·∫£ng",
          activities: "V·∫Ω tranh, ca h√°t, m√∫a, th·ªÉ d·ª•c, n·∫•u ƒÉn",
          registration: "T·ª´ 1/5/2025 ƒë·∫øn 31/5/2025",
          costs: [
            { item: "H·ªçc ph√≠", amount: "7.000.000 VNƒê" },
            { item: "ƒÇn u·ªëng", amount: "1.200.000 VNƒê" },
            { item: "T√†i li·ªáu", amount: "200.000 VNƒê" },
            { item: "Ho·∫°t ƒë·ªông", amount: "100.000 VNƒê" },
            { item: "T·ªïng c·ªông", amount: "8.500.000 VNƒê" },
          ],
        },
        choi: {
          title: "V∆Ø·ªúN ∆ØM B√â V√ÄO L·ªöP CH·ªíI",
          contents: [
            "Ph√°t tri·ªÉn kh·∫£ nƒÉng ng√¥n ng·ªØ v√† giao ti·∫øp",
            "R√®n luy·ªán k·ªπ nƒÉng v·∫≠n ƒë·ªông c∆° b·∫£n",
            "H·ªçc t·∫≠p qua tr·∫£i nghi·ªám v√† kh√°m ph√°",
            "Ph√°t tri·ªÉn t∆∞ duy logic v√† s√°ng t·∫°o",
            "X√¢y d·ª±ng th√≥i quen h·ªçc t·∫≠p t√≠ch c·ª±c",
            "TƒÉng c∆∞·ªùng k·ªπ nƒÉng s·ªëng c·∫ßn thi·∫øt",
          ],
          goals: [
            "Chu·∫©n b·ªã t·ªët nh·∫•t cho b·∫≠c h·ªçc ti·∫øp theo",
            "Ph√°t tri·ªÉn kh·∫£ nƒÉng t·ª± h·ªçc v√† t·ª± nghi√™n c·ª©u",
            "X√¢y d·ª±ng t√≠nh c√°ch t√≠ch c·ª±c v√† l·∫°c quan",
            "TƒÉng c∆∞·ªùng kh·∫£ nƒÉng l√†m vi·ªác nh√≥m",
          ],
          studentCount: "18-22 tr·∫ª/l·ªõp",
          teachers: "2 gi√°o vi√™n ch√≠nh + 1 tr·ª£ gi·∫£ng",
          activities: "Th√≠ nghi·ªám khoa h·ªçc, l√†m v∆∞·ªùn, n·∫•u ƒÉn, th·ªÉ thao",
          registration: "T·ª´ 1/5/2025 ƒë·∫øn 31/5/2025",
          costs: [
            { item: "H·ªçc ph√≠", amount: "6.500.000 VNƒê" },
            { item: "ƒÇn u·ªëng", amount: "1.100.000 VNƒê" },
            { item: "T√†i li·ªáu", amount: "200.000 VNƒê" },
            { item: "Ho·∫°t ƒë·ªông", amount: "100.000 VNƒê" },
            { item: "T·ªïng c·ªông", amount: "7.900.000 VNƒê" },
          ],
        },
      },
    };
  },
  mounted() {
    this.initScrollAnimations();
  },
  methods: {
    showProgramDetail(programType) {
      this.currentProgram = this.programDetails[programType];
      this.showModal = true;
      document.body.style.overflow = "hidden";
    },
    closeModal() {
      this.showModal = false;
      document.body.style.overflow = "auto";
    },
    initScrollAnimations() {
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const element = entry.target;
            const animation = element.dataset.animation;
            const delay = element.dataset.delay || 0;

            setTimeout(() => {
              element.classList.add("animate-visible");
            }, delay);

            observer.unobserve(element);
          }
        });
      }, observerOptions);

      // Quan s√°t t·∫•t c·∫£ c√°c element c√≥ class animate-on-scroll
      const animateElements = document.querySelectorAll(".animate-on-scroll");
      animateElements.forEach((el) => {
        observer.observe(el);
      });
    },
  },
  beforeUnmount() {
    // Cleanup observer n·∫øu c·∫ßn
    if (this.observer) {
      this.observer.disconnect();
    }
    // Reset body overflow
    document.body.style.overflow = "auto";
  },
};
</script>

<style lang="scss">
@use "./style.scss";
</style>
